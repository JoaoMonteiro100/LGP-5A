<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="widgets/patients-list.html">
<link rel="import" href="widgets/patient-details.html">
<link rel="import" href="widgets/patient-history.html">
<link rel="import" href="widgets/patient-chart.html">
<dom-module id="page-patients">
    <template>
        <style include="shared-styles"></style>
        <style>
            :host::shadow .widget {
                height: auto !important;
            / / todo: remove important min-height: 460 px;
            }
        </style>

        <app-widgets selected="{{myChoice}}" widgets="{{widgets}}" cols="{{cols.style3}}"></app-widgets>
        <app-widgets hidden$="{{neuroskyHidden}}" widgets="{{widgets2}}" cols="{{cols.style1}}"></app-widgets>
        <app-widgets hidden$="{{emotivHidden}}" widgets="{{widgets3}}" cols="{{cols.style1}}"></app-widgets>
    </template>
    <script>
        (function () {
            'use strict';

            Polymer({
                is: 'page-patients',

                properties: {
                    cols: {
                        type: Object,
                        notify: true
                    },
                    neuroskyHidden: {
                        type: Boolean,
                        value: true
                    },
                    emotivHidden: {
                        type: Boolean,
                        value: true
                    },
                    widgets: {
                        type: Array,
                        value: [
                            {
                                title: 'Patients',
                                component: 'patients-list',
                                buttons: [
                                    {button: 'search-patient'},
                                    {button: 'add-patient'}
                                ]

                            },
                            {
                                title: 'Patient Details',
                                component: 'patient-details',
                                buttons: [
                                    {button: 'edit-patient'},
                                    {button: 'delete-patient'},
                                     {button: 'edit-note'},
                                     {button: 'request-transfer'}
                                ]
                            },
                            {
                                title: 'Patient History',
                                component: 'patient-history',
                                buttons: [
                                    {button: 'delete-reading'}
                                ]
                            }
                        ]
                    },
                    widgets2: {
                        type: Array,
                        value: [
                            {
                                title: 'Neurosky Chart',
                                component: 'patient-chart',
                                buttons: []
                            }]
                    },

                    widgets3: {
                        type: Array,
                        value: [
                            {
                                title: 'Emotiv Chart',
                                component: 'page-charts-emotiv',
                                buttons: []
                            }]
                    }
                },

                ready: function () {
                    var self = this;

                    addEventListener('show-emotiv', function () {
                        self.emotivHidden = false;
                        self.neuroskyHidden = true;
                    });

                    addEventListener('show-neurosky', function () {
                        self.emotivHidden = false;
                        self.neuroskyHidden = true;
                    });
                }
            });
        })();
    </script>
</dom-module>