<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../../bower_components/polymer/polymer.html">

<dom-module id="add-patient">
  <template>
    <style include="shared-styles"></style>
    <style>
      :host {
        display: block;
      }
      #modal{
        width: 350px;
      }
      .containerdiv {
          @apply(--layout-horizontal);
          height: 100%;
          width: 100%;
          padding-right: 0px;
          font-size: 12px;
        }
        #genpw{
          margin-top: 16px;
        }
        .flexchild {
          @apply(--layout-flex);
        }

    </style>
    <paper-icon-button data-dialog="modal" icon="icons:add" on-click="clickHandler"></paper-icon-button>

    <paper-dialog id="modal" modal>
      <h1>Add new Patient</h1>
      <form is="iron-form" method="get" action="/" id="newuserform">
  <paper-input name="firstname" label="First Name" char-counter maxlength="10" auto-validate pattern="[a-zA-Z]*" error-message="letters only!" required auto-validate></paper-input>
  <paper-input name="lastname" label="Last Name" char-counter maxlength="10" auto-validate pattern="[a-zA-Z]*" error-message="letters only!" required auto-validate></paper-input>
  <paper-input name="unumber" label="Number" auto-validate pattern="[0-9]*" error-message="numbers only!" required auto-validate></paper-input>
  <div class="containerdiv">
    <div class="flexchild">
  <paper-input name="password" id="pwinput" label="Password" minlength="6" required auto-validate></paper-input>
</div>
  <paper-icon-button id="genpw" icon="icons:create" on-tap="generatePW">
</div>
  <paper-button raised onclick="_delayedSubmit(event)" disabled id="newuserformSubmit">
    <paper-spinner id="spinner" hidden></paper-spinner>Submit</paper-button>
  <paper-button raised on-tap="_reset">Reset</paper-button>
  <div class="output"></div>
</form>
     <div class="buttons">
       <paper-button on-tap="_reset" dialog-confirm autofocus>Close</paper-button>
     </div>
   </paper-dialog>
  </template>
  <script>
  (function() {
    'use strict';

    Polymer({
      is: 'add-patient',

      properties: {
      },
      ready: function(){
        this.$.newuserform.addEventListener('change', function(event) {
      newuserformSubmit.disabled = !newuserform.validate();
    });
  },
      clickHandler:function(e) {
     var button = e.target;
     while (!button.hasAttribute('data-dialog') && button !== document.body) {
       button = button.parentElement;
     }
     if (!button.hasAttribute('data-dialog')) {
       return;
     }
     var id = button.getAttribute('data-dialog');
     var dialog = document.getElementById(id);
     if (dialog) {
       dialog.open();
     }
   },
    _reset:function() {
    document.getElementById('newuserform').reset();
  },

   generatePW:function() {
    var chars = "abcdefghijklmnopqrstuvwxyz_-ABCDEFGHIJKLMNOP1234567890";
    var pass = "";
    for (var x = 0; x < 6; x++) {
        var i = Math.floor(Math.random() * chars.length);
        pass += chars.charAt(i);
    }
    this.$.pwinput.value = pass;
    newuserformSubmit.disabled = !newuserform.validate();
},

    });
  })();
  </script>
</dom-module>
